{% extends "base.html" %}

{% block title %}Book {{ tour.name }} - North Trips and Travel{% endblock %}

{% block content %}
<div class="form-container">
    <h2>Book Tour: {{ tour.name }}</h2>
    
    <div class="tour-details mb-3">
        {% if tour.image_base64 %}
            <img src="data:image/jpeg;base64,{{ tour.image_base64 }}" alt="{{ tour.name }}" class="image-preview" style="max-height: 200px; object-fit: cover;">
        {% endif %}
        <p class="mt-3"><strong>Price per person:</strong> {{ format_currency(tour.price) }}</p>
        <p><strong>Duration:</strong> {{ tour.duration }}</p>
        {% if tour.tour_type == 'group' %}
            <p style="color: var(--warning); font-weight: bold;">This is a Group Tour.</p>
            <p><strong>Group Start Date:</strong> {{ tour.group_start_date }}</p>
            <p><strong>Available Seats:</strong> {{ tour.available_seats }}</p>
        {% endif %}
    </div>

    <form method="POST" action="{{ url_for('book_tour', tour_id=tour.id) }}">
        <div class="form-group">
            <label for="participants">Number of Participants</label>
            <input type="number" id="participants" name="participants" min="1" required value="1">
        </div>
        <div class="form-group">
            <label for="tour_date">Preferred Date</label>
            {% if tour.tour_type == 'group' %}
                <input type="date" id="tour_date" name="tour_date" value="{{ tour.group_start_date }}" readonly required>
                <small class="form-text text-muted">Group tours must be booked for the specified start date.</small>
            {% else %}
                <input type="date" id="tour_date" name="tour_date" required>
            {% endif %}
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Confirm Booking</button>
        </div>
    </form>
</div>
{% endblock %}
